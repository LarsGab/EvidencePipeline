
docker.enabled = false

process {
  executor        = 'slurm'
  queue           = 'snowball,pinky,batch'
  cpus            = 100
  memory          = '120 GB'
  time            = '4h'
  nodes           = 1
  stageInMode     = 'symlink'

  withLabel: 'gpu' {
    clusterOptions = '--gpus=1 --get-user-env'
    queue          = 'vision'
    //singularity.runOptions = "--nv"
    ext.singularityFlags = '--nv'
  }
}

executor {
    queueSize = 20
}

singularity {
  enabled      = true
  autoMounts   = true
  envWhitelist = 'CUDA_VISIBLE_DEVICES'
  cacheDir   = '/home/gabriell/.singularity-cache'
  //runOptions = "--nv "  
}

params {
  threads=48
  outdir      = "results"
  mode        = null
  restart     = false
  genome      = null
  proteins    = null
  rnaseq_paired = []
  rnaseq_single = []
  isoseq        = []
  scoring_matrix = "${projectDir}/blosum62.csv"
  prothint_conflict_filter = false
  tools {
    hisat2   = "hisat2"
    hisat2_build = "hisat2-build"
    minimap2 = "minimap2"
    stringtie= "stringtie"
    samtools = "samtools"
    transdecoder_longorfs = "TransDecoder.LongOrfs"
    transdecoder_predict  = "TransDecoder.Predict"
    transdecoder_util_gtf2fa = "gtf_genome_to_cdna_fasta.pl"
    transdecoder_util_orf2genome = "cdna_alignment_orf_to_genome_orf.pl"
    transdecoder_gtf2gff = "gtf_to_alignment_gff3.pl"
    diamond  = "diamond"
    bedtools = "bedtools"
    miniprot = "miniprot"
    miniprot_boundary_scorer = "miniprot_boundary_scorer"
    miniprothint = "miniprothint.py"
    aln2hints = "${projectDir}/aln2hints.pl"
    bam2hints = "bam2hints"
    filterIntronsFindStrand = "${projectDir}/filterIntronsFindStrand.pl"
  }
  containers { rna=null; protein=null; core=null }
}
